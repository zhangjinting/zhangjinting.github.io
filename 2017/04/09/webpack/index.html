<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="webpack及相关常用配置">
<meta property="og:type" content="article">
<meta property="og:title" content="webpack构建工具">
<meta property="og:url" content="http://yoursite.com/2017/04/09/webpack/index.html">
<meta property="og:site_name" content="张金婷的个人博客">
<meta property="og:description" content="webpack及相关常用配置">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2017-11-20T05:40:43.364Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="webpack构建工具">
<meta name="twitter:description" content="webpack及相关常用配置">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/04/09/webpack/"/>





  <title>webpack构建工具 | 张金婷的个人博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">张金婷的个人博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">捕捉金小宝一枚</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/09/webpack/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="zhangjinting">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/pic.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="张金婷的个人博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">webpack构建工具</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-04-09T13:27:18+08:00">
                2017-04-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Javascript/" itemprop="url" rel="index">
                    <span itemprop="name">Javascript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          
              <div class="post-description">
                  webpack及相关常用配置
              </div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><h3 id="什么是webpack"><a href="#什么是webpack" class="headerlink" title="什么是webpack"></a>什么是webpack</h3><p>为了防止变量冲突，解决加载javascript麻烦的问题，我们会使用webpack打包工具，类似于node的模块化代码，js打包后可以运行在浏览器。</p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><h4 id="全局安装"><a href="#全局安装" class="headerlink" title="全局安装"></a>全局安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --global webpack</div></pre></td></tr></table></figure>
<p>安装在全局的webpack打包的时候使用的是你安装在电脑上的webpack，如果到其他人的计算机上，可能安装的是老版本的webpack，那就可能涉及到兼容性问题；或者如果对方没有安装全局webpack则无法打包。</p>
<p>所以为了解决以上问题，<strong>我们通常会把webpack安装到本地项目中。</strong>这样的话项目到哪里，webpack就到了哪里。   </p>
<h4 id="本地安装（推荐）"><a href="#本地安装（推荐）" class="headerlink" title="本地安装（推荐）"></a>本地安装（推荐）</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev webpack</div></pre></td></tr></table></figure>
<p>webpack只是一个打包工具，项目上线的是打包结果，不是工具，为了区分核心包依赖和开发工具依赖，我们通过<code>--save</code>和<code>--save-dev</code>来区分，所以安装的时候把webpack安装到开发依赖中<code>--save-dev</code></p>
<p>对于安装到项目中的webpack需要配置npm scripts来使用</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">//在package.json文件中配置</div><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>: <span class="string">"demo"</span>,</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">  <span class="attr">"main"</span>: <span class="string">"webpack.config.js"</span>,</div><div class="line">  <span class="attr">"scripts"</span>: &#123;</div><div class="line">    "build": "webpack"   //看这里,相当于给webpack起了一个别名build</div><div class="line">  &#125;,</div><div class="line">  "keywords": [],</div><div class="line">  "author": "",</div><div class="line">  "license": "ISC",</div><div class="line">  "devDependencies": &#123;</div><div class="line">    "webpack": "^3.8.1"</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后通过<code>npm run</code> 命令来打包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span> 这里使用的 webpack 就是项目中安装的 webpack</div><div class="line">npm run build</div></pre></td></tr></table></figure>
<h4 id="Hello-world"><a href="#Hello-world" class="headerlink" title="Hello world"></a>Hello world</h4><p>我们来做一个小例子：</p>
<ul>
<li>本地安装（参考安装步骤）</li>
<li>准备目录结构：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── index.html</div><div class="line">├── main.js</div><div class="line">└── foo.js</div></pre></td></tr></table></figure>
<ul>
<li><code>foo.js</code> 文件内容如下：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'foo 文件'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><code>main.js</code> 文件内容如下：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = <span class="built_in">require</span>(<span class="string">'./foo'</span>)</div><div class="line">foo()</div></pre></td></tr></table></figure>
<ul>
<li><p>打包：</p>
<p>bundle.js只是一个名字，意思是打包到bundle.js这个文件中</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span> webpack 模块入口文件路径 模块出口文件路径（会自动生成）：</div><div class="line">webpack main.js bundle.js</div></pre></td></tr></table></figure>
<ul>
<li><code>index.html</code> 文件内容如下：</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!-- 最后记得把 index.html 文件中的脚本应用改为打包之后的结果文件路径。 --&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>打开查看 index.html。</p>
<p>​    </p>
<p>为了划分目录结构的清晰，一般我们把项目中的源码和打包结果做如下划分：</p>
<ul>
<li>把源码存储到 src 目录中</li>
<li>把打包的结果存储到 dist 目录中</li>
</ul>
<h3 id="webpack配置文件"><a href="#webpack配置文件" class="headerlink" title="webpack配置文件"></a>webpack配置文件</h3><p>新建一个webpack的配置文件<code>webpack.config.js</code>配置基本项：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 该文件其实最终是要在 Node 环境下执行的</span></div><div class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</div><div class="line"></div><div class="line"><span class="comment">// 导出一个具有特殊属性配置的对象</span></div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  entry: <span class="string">'./src/main.js'</span>, <span class="comment">// 入口文件模块路径</span></div><div class="line">  output: &#123;</div><div class="line">    path: path.join(__dirname, <span class="string">'./dist/'</span>), <span class="comment">// 出口文件模块所属目录，path 必须是一个绝对路径</span></div><div class="line">    filename: <span class="string">'bundle.js'</span> <span class="comment">// 打包的结果文件名称</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>webpack</code>命令会自动读取<code>webpack.config.js</code>文件作为默认的配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack</div></pre></td></tr></table></figure>
<p>如果将webpack.config.js重命名为webpack.dev.config.js，则直接执行默认的webpack命令则会找不到相应的配置文件，需要借助于webpack的–config选项来指定配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">webpack --config webpack.dev.config.js</div></pre></td></tr></table></figure>
<p>​    </p>
<h3 id="资源管理"><a href="#资源管理" class="headerlink" title="资源管理"></a>资源管理</h3><p>webpack不仅可以打包Javascript模块，也可以把网页开发中的一切资源当做模块来打包处理。</p>
<p>但是它本身不支持，它只是一个打包平台，其他的资源例如css、less、sass等需要结合插件来实现，这些插件在webpack中称之为loader</p>
<h4 id="Loading-CSS"><a href="#Loading-CSS" class="headerlink" title="Loading CSS"></a>Loading CSS</h4><p>打包css也是把css文件内容转换成了一个javascript模块，然后再运行js的时候会动态创建一个style节点插入到body中</p>
<ul>
<li>安装依赖：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev style-loader css-loader</div></pre></td></tr></table></figure>
<ul>
<li>配置（webpack.config.js）:</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">var path = require('path')</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  entry: './src/main.js',</div><div class="line">  output: &#123;</div><div class="line">    path: path.join(__dirname, './dist/'),</div><div class="line">    filename: 'bundle.js'</div><div class="line">  &#125;,</div><div class="line">  module: &#123;   //看这里--配置一个module</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /.css$/,</div><div class="line">        use: [</div><div class="line">          // 注意：这里的顺序很重要，执行是从后向前</div><div class="line">          'style-loader',</div><div class="line">          'css-loader'</div><div class="line">        ]</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>打包：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run build</div></pre></td></tr></table></figure>
<h4 id="Loading-Images"><a href="#Loading-Images" class="headerlink" title="Loading Images"></a>Loading Images</h4><ul>
<li>安装依赖：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev file-loader</div></pre></td></tr></table></figure>
<ul>
<li>配置：</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  rules: [</div><div class="line">    &#123;</div><div class="line">      test: <span class="regexp">/.css$/</span>,</div><div class="line">      use: [</div><div class="line">        <span class="string">'style-loader'</span>,</div><div class="line">        <span class="string">'css-loader'</span></div><div class="line">      ]</div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">      test: <span class="regexp">/.(jpg|png|gif|svg)$/</span>,</div><div class="line">      use: [</div><div class="line">        <span class="string">'file-loader'</span></div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id=""><a href="#" class="headerlink" title=" "></a> </h3><h4 id="Loading-Less"><a href="#Loading-Less" class="headerlink" title="Loading Less"></a>Loading Less</h4><ul>
<li>安装依赖：</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span> 如果 css-loader 安装过了就不需要安装了</div><div class="line">npm i -D css-loader style-loader less less-loader</div></pre></td></tr></table></figure>
<ul>
<li>配置（webpack.config.js）:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  rules: [</div><div class="line">    &#123;</div><div class="line">      test: <span class="regexp">/.less$/</span>,</div><div class="line">      use: [</div><div class="line">        <span class="string">'style-loader'</span>, <span class="comment">//最后加入style标签里</span></div><div class="line">        <span class="string">'css-loader'</span>,  <span class="comment">//再把css转化成javascript模块</span></div><div class="line">        <span class="string">'less-loader'</span> <span class="comment">//先把less转化成css</span></div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="Loading-Vue"><a href="#Loading-Vue" class="headerlink" title="Loading Vue"></a>Loading Vue</h4><p>安装依赖：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span> vue-loader 依赖 vue-template-compiler</div><div class="line">npm i -D vue-loader vue-template-compiler</div></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  rules: [</div><div class="line">    &#123;</div><div class="line">      test: <span class="regexp">/.vue$/</span>,</div><div class="line">      use: [</div><div class="line">        <span class="string">'vue-loader'</span></div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="transpiling-JavaScript"><a href="#transpiling-JavaScript" class="headerlink" title="transpiling JavaScript"></a>transpiling JavaScript</h4><p>主要应用babel，它是javascript的编译器，可以把EcmaScript6编译成EcmaScript5</p>
<ul>
<li><strong>babel-loader  只转换语法</strong></li>
</ul>
<p>安装依赖</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install --save-dev babel-loader babel-core babel-preset-env</div></pre></td></tr></table></figure>
<p>配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  rules: [</div><div class="line">    &#123;</div><div class="line">      test: <span class="regexp">/\.js$/</span>,</div><div class="line">      <span class="comment">// 不转换 node_modules 中的文件模块</span></div><div class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>, </div><div class="line">      use: &#123;</div><div class="line">        loader: <span class="string">'babel-loader'</span>,</div><div class="line">        options: &#123;</div><div class="line">          presets: [<span class="string">'env'</span>] <span class="comment">//env 包含1234所有转码规则</span></div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><p><strong>babel-polyfill  垫脚片</strong></p>
<p>解决低版本浏览器中不支持的API</p>
</li>
</ul>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -D babel-polyfill</div></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">entry: [<span class="string">'babel-polyfill'</span>, <span class="string">'./src/main.js'</span>],</div></pre></td></tr></table></figure>
<ul>
<li><strong>transform-runtime 解决代码重复问题</strong></li>
</ul>
<p>打包过程中，babel会在某些包提供一些工具函数，而这些工具函数可能会重复出现在多个模块，这样的话就会导致打包体积过大，所以babel提供了一个babel-transform-runtime来解决</p>
<p>安装：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install babel-plugin-transform-runtime --save-dev</div><div class="line">npm install babel-runtime --save</div></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  rules: [</div><div class="line">    &#123;</div><div class="line">      test: <span class="regexp">/\.js$/</span>,</div><div class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</div><div class="line">      use: &#123;</div><div class="line">        loader: <span class="string">'babel-loader'</span>,</div><div class="line">        options: &#123;</div><div class="line">          presets: [<span class="string">'env'</span>],</div><div class="line">          plugins: [<span class="string">'transform-runtime'</span>]</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="-1"><a href="#-1" class="headerlink" title=" "></a> </h4><ul>
<li><strong>cacheDirectory 加入缓存节省编译时间</strong></li>
</ul>
<p>node_module 中会增加cache目录，会缓存打包信息，有效减少打包信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>: &#123;</div><div class="line">  rules: [</div><div class="line">    &#123;</div><div class="line">      test: <span class="regexp">/\.js$/</span>,</div><div class="line">      exclude: <span class="regexp">/(node_modules|bower_components)/</span>,</div><div class="line">      use: &#123;</div><div class="line">        loader: <span class="string">'babel-loader'</span>,</div><div class="line">        options: &#123;</div><div class="line">          <span class="comment">// 默认把打包的结果缓存到 node_modules/.cache 模板</span></div><div class="line">          cacheDirectory: <span class="literal">true</span>,</div><div class="line">          presets: [<span class="string">'env'</span>],</div><div class="line">          plugins: [<span class="string">'transform-runtime'</span>]</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="输出管理"><a href="#输出管理" class="headerlink" title="输出管理"></a>输出管理</h3><h4 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h4><p>有一个问题，当打包结束的时候，如果index.html在根目录直接运行的话，图片资源这些路径就无法直接访问到了。解决方案就是把index.html放在dist目录中。但是dist是打包变异的结果而非源码，所以把index.html放在dist就不合适，而且如果更改bundle名字，那么html里面的引入也要手动修改。</p>
<p>综合以上考虑，我们使用一个插件<code>html-webpack-plugin</code>   </p>
<p>安装依赖：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -D html-webpack-plugin</div></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">plugins: [</div><div class="line">  <span class="keyword">new</span> htmlWebpackPlugin(&#123;</div><div class="line">    template: <span class="string">'./index.html'</span></div><div class="line">  &#125;)</div><div class="line">],</div></pre></td></tr></table></figure>
<p>这个插件的作用就是把index.html打包到你的bundle.js 文件所属目录，也就是说bundle在哪里，index就在哪里，这个插件还可以配置压缩html的处理</p>
<h4 id="webpack-dev-server-自动刷新浏览器"><a href="#webpack-dev-server-自动刷新浏览器" class="headerlink" title="webpack-dev-server 自动刷新浏览器"></a>webpack-dev-server 自动刷新浏览器</h4><p>这是一个很好用的工具，每次手动打包很麻烦，还需要手动刷新浏览器</p>
<p>而这个工具会自动帮你打包，打包完毕只有会自动开启一个服务器，默认监听 8080 端口号，同时自动打开浏览器让你访问，接下来就会自动监视代码的改变，然后自动编译，编译完毕，自动刷新浏览器。   </p>
<p>安装依赖：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i -D webpack-dev-server</div></pre></td></tr></table></figure>
<p>配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">devServer: &#123;</div><div class="line">  <span class="comment">// 配置 webpack-dev-server 的 www 目录</span></div><div class="line">  contentBase: <span class="string">'./'</span></div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>这里配置<code>./</code>的话，webpack-dev-server会直接把资源打包到根目录下（但是你看不到他，在内存中），这个时候在index.html文件中请求的资源就是相对于根目录的   </p>
<p>配置 npm scritps:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">"scripts": &#123;</div><div class="line">  "build": "webpack",</div><div class="line">  "watch-build": "webpack --watch",</div><div class="line">  "dev": "webpack-dev-server --open"  //这里</div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<p>启动开发模式：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run dev</div></pre></td></tr></table></figure>
<h4 id="Hot-Module-Replacement-热更新"><a href="#Hot-Module-Replacement-热更新" class="headerlink" title="Hot Module Replacement 热更新"></a>Hot Module Replacement 热更新</h4><p>保存立即更新</p>
<p>配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)  <span class="comment">//配置这里</span></div><div class="line"></div><div class="line"><span class="comment">//配置plugins</span></div><div class="line">plugins: [</div><div class="line">    <span class="keyword">new</span> htmlWebpackPlugin(&#123;</div><div class="line">      template: <span class="string">'./index.html'</span></div><div class="line">    &#125;),</div><div class="line">    <span class="keyword">new</span> webpack.NamedModulesPlugin(), <span class="comment">//配置这里</span></div><div class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()  <span class="comment">//配置这里</span></div><div class="line">  ],</div><div class="line"><span class="comment">//配置devServer</span></div><div class="line">devServer: &#123;</div><div class="line">    contentBase: <span class="string">'./'</span>,</div><div class="line">    +++ hot: <span class="literal">true</span>  <span class="comment">//配置这里</span></div><div class="line">&#125;,</div></pre></td></tr></table></figure>
<h3 id="关于第三方包"><a href="#关于第三方包" class="headerlink" title="关于第三方包"></a>关于第三方包</h3><p>通产我们不打包第三方包，因为第三方包太大，和bundle打包在一起会造成资源体积过大，所有我们还是通过script标签的方式引入页面中</p>
<p>那如何配置webpack不打包第三方包呢？我们以JQuery为例</p>
<ul>
<li>下载第三方包</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm i jquery</div></pre></td></tr></table></figure>
<ul>
<li>在页面中引入资源</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"node_modules/jquery/dist/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<ul>
<li>配置</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">externals: &#123;</div><div class="line">  <span class="comment">// key 是第三方包名称，value 是全局中的 jQuery 对象</span></div><div class="line">  jquery: <span class="string">'jQuery'</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当你在代码中 import jquery 的时候，不会把 jquery 打包到 bundle 中，而是使用我们指定的全局中的 jQuery 对象</p>
<ul>
<li>加载使用</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'jquery'</span></div><div class="line"></div><div class="line">$(<span class="string">'#app'</span>, &#123;</div><div class="line">  width: <span class="number">200</span>,</div><div class="line">  height: <span class="number">200</span>,</div><div class="line">  backgroundColor: <span class="string">'pink'</span></div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<ul>
<li>打包测试</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm run build</div></pre></td></tr></table></figure>
<p>## </p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/12/meteor/" rel="next" title="流星雨">
                <i class="fa fa-chevron-left"></i> 流星雨
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="uyan_frame"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          
            <img class="site-author-image" itemprop="image"
              src="/images/pic.jpg"
              alt="zhangjinting" />
          
            <p class="site-author-name" itemprop="name">zhangjinting</p>
            <p class="site-description motion-element" itemprop="description">一直在路上</p>
        </div>

        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
            
              <a href="/archives/">
            
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.w3cschool.cn/" title="w3cschool" target="_blank">w3cschool</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.ityyy.cc/" title="社会羊" target="_blank">社会羊</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#webpack"><span class="nav-number">1.</span> <span class="nav-text">webpack</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#什么是webpack"><span class="nav-number">1.0.1.</span> <span class="nav-text">什么是webpack</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装"><span class="nav-number">1.0.2.</span> <span class="nav-text">安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#全局安装"><span class="nav-number">1.0.2.1.</span> <span class="nav-text">全局安装</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#本地安装（推荐）"><span class="nav-number">1.0.2.2.</span> <span class="nav-text">本地安装（推荐）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hello-world"><span class="nav-number">1.0.2.3.</span> <span class="nav-text">Hello world</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#webpack配置文件"><span class="nav-number">1.0.3.</span> <span class="nav-text">webpack配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#资源管理"><span class="nav-number">1.0.4.</span> <span class="nav-text">资源管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Loading-CSS"><span class="nav-number">1.0.4.1.</span> <span class="nav-text">Loading CSS</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Loading-Images"><span class="nav-number">1.0.4.2.</span> <span class="nav-text">Loading Images</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#"><span class="nav-number">1.0.5.</span> <span class="nav-text"> </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Loading-Less"><span class="nav-number">1.0.5.1.</span> <span class="nav-text">Loading Less</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Loading-Vue"><span class="nav-number">1.0.5.2.</span> <span class="nav-text">Loading Vue</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#transpiling-JavaScript"><span class="nav-number">1.0.5.3.</span> <span class="nav-text">transpiling JavaScript</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#-1"><span class="nav-number">1.0.5.4.</span> <span class="nav-text"> </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#输出管理"><span class="nav-number">1.0.6.</span> <span class="nav-text">输出管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#HtmlWebpackPlugin"><span class="nav-number">1.0.6.1.</span> <span class="nav-text">HtmlWebpackPlugin</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#webpack-dev-server-自动刷新浏览器"><span class="nav-number">1.0.6.2.</span> <span class="nav-text">webpack-dev-server 自动刷新浏览器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hot-Module-Replacement-热更新"><span class="nav-number">1.0.6.3.</span> <span class="nav-text">Hot Module Replacement 热更新</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关于第三方包"><span class="nav-number">1.0.7.</span> <span class="nav-text">关于第三方包</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
<div class="copyright" >
  
  &copy; 
  <span>2015</span>
  <span> - </span>
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhangjinting</span>

  
</div>

<!--
  <div class="powered-by">由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">主题 &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.2</div>
 -->
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>


  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  
    

    
      <!-- UY BEGIN -->
      <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=2147646"></script>
      <!-- UY END -->
    
  





  








  





  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  

  

  

  


  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/love.js"></script>
</body>
</html>
